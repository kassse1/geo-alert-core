# üö® Geo Alert Core
**Geo Alert Core** ‚Äî backend-—Å–µ—Ä–≤–∏—Å –Ω–∞ Go, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã –≥–µ–æ–æ–ø–æ–≤–µ—â–µ–Ω–∏–π.  
–°–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ —á–µ—Ä–µ–∑ HTTP API.
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Clean Architecture**, **PostgreSQL** –∏ **Docker**.

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture:
### –†–æ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Handler** ‚Äî HTTP —Å–ª–æ–π, –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
- **Service** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≥–µ–æ-–ø—Ä–æ–≤–µ—Ä–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)  
- **Repository** ‚Äî –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (PostgreSQL)  
- **Middleware** ‚Äî API-key –∑–∞—â–∏—Ç–∞  
- **Transport** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤  
- **Config** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è  

---

## üì¶ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
### üîê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏ (CRUD, –∑–∞—â–∏—â–µ–Ω–æ API-key)
- `POST   /api/v1/incidents` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞  
- `GET    /api/v1/incidents` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è)  
- `GET    /api/v1/incidents/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç –ø–æ ID  
- `PUT    /api/v1/incidents/{id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç  
- `DELETE /api/v1/incidents/{id}` ‚Äî –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞  
> ‚ùó –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ **–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è**, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∞–Ω–Ω—ã—Ö.
---

### üìç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–ø—É–±–ª–∏—á–Ω—ã–π API)
- `POST /api/v1/location/check`
–ú–æ–±–∏–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–µ—Ä–≤–∏—Å **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.
–§–∞–∫—Ç –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.

---

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/v1/incidents/stats?minutes=N`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**, –≤—ã–ø–æ–ª–Ω–∏–≤—à–∏—Ö –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ `N` –º–∏–Ω—É—Ç.
–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```json
{
  "user_count": 3
}

---

‚ù§Ô∏è Health Check
GET /api/v1/system/health
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

---

üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
Go 1.24+
PostgreSQL 15
Docker / Docker Compose
REST API
Clean Architecture
Haversine formula (–≥–µ–æ-—Ä–∞—Å—á—ë—Ç—ã)

---

‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ü—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞:
APP_PORT=8080
POSTGRES_DSN=postgres://danger:danger@localhost:5433/danger?sslmode=disable
API_KEY=super-secret-key
STATS_TIME_WINDOW_MINUTES=5

---

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
docker compose up -d
2Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
go run ./cmd/api

---

üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (PowerShell)
–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞

Invoke-RestMethod `
  -Uri "http://localhost:8080/api/v1/incidents" `
  -Method Post `
  -Headers @{ "X-API-Key" = "super-secret-key" } `
  -ContentType "application/json" `
  -Body '{ "title": "Fire near mall", "lat": 43.23, "lon": 76.88, "radius_m": 500 }'

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

Invoke-RestMethod `
  -Uri "http://localhost:8080/api/v1/location/check" `
  -Method Post `
  -ContentType "application/json" `
  -Body (@{
    user_id = "user1"
    lat = 43.23
    lon = 76.88
  } | ConvertTo-Json)
