Geo Alert Core ‚Äî backend-—Å–µ—Ä–≤–∏—Å –Ω–∞ Go, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã –≥–µ–æ–æ–ø–æ–≤–µ—â–µ–Ω–∏–π.
–°–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç –º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –Ω–æ–≤–æ—Å—Ç–Ω—ã–º –ø–æ—Ä—Ç–∞–ª–æ–º —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫–∏.

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Clean Architecture, PostgreSQL –∏ Docker.

üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
HTTP (Handlers)
‚Üì
Services (Business logic)
‚Üì
Repositories (PostgreSQL)


–†–æ–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

Handler ‚Äî HTTP —Å–ª–æ–π, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

Service ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≥–µ–æ-–ø—Ä–æ–≤–µ—Ä–∫–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

Repository ‚Äî –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (PostgreSQL)

Middleware ‚Äî API-key –∑–∞—â–∏—Ç–∞

Transport ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è

üì¶ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
üîπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏ (CRUD, –∑–∞—â–∏—â–µ–Ω–æ API-key)

POST /api/v1/incidents

GET /api/v1/incidents

GET /api/v1/incidents/{id}

PUT /api/v1/incidents/{id}

DELETE /api/v1/incidents/{id} (–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è)

üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–ø—É–±–ª–∏—á–Ω—ã–π API)

POST /api/v1/location/check

–ú–æ–±–∏–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–ø–∞—Å–Ω—ã—Ö –∑–æ–Ω –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏.

üîπ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

GET /api/v1/incidents/stats?minutes=N

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤—ã–ø–æ–ª–Ω–∏–≤—à–∏—Ö –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª.

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

{ "user_count": 3 }

üîπ Health Check

GET /api/v1/system/health

üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

Go 1.24+

PostgreSQL 15

Docker / docker-compose

Clean Architecture

Haversine formula (–≥–µ–æ-—Ä–∞—Å—á—ë—Ç)

‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (env)
APP_PORT=8080
POSTGRES_DSN=postgres://danger:danger@localhost:5433/danger?sslmode=disable
API_KEY=super-secret-key
STATS_TIME_WINDOW_MINUTES=5

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞
docker compose up -d
go run ./cmd/api

üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (PowerShell)
–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç
Invoke-RestMethod `
  -Uri "http://localhost:8080/api/v1/incidents" `
-Method Post `
  -Headers @{ "X-API-Key" = "super-secret-key" } `
-ContentType "application/json" `
-Body '{ "title": "Fire", "lat": 43.23, "lon": 76.88, "radius_m": 500 }'

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
Invoke-RestMethod `
  -Uri "http://localhost:8080/api/v1/location/check" `
-Method Post `
  -ContentType "application/json" `
-Body (@{
user_id = "user1"
lat = 43.23
lon = 76.88
} | ConvertTo-Json)

üìà –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–µ–±—Ö—É–∫–∏

Redis –æ—á–µ—Ä–µ–¥—å

Retry-–º–µ—Ö–∞–Ω–∏–∑–º –¥–æ—Å—Ç–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤